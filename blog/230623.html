<!DOCTYPE html><html lang="en" class="text-black bg-white dark:text-white dark:bg-black __variable_ac79ff __variable_8a4d12"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/ec1a1eae803b668e-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/f980ec13b5b5e554.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/images/blog/230623/patch_2.jpg"/><link rel="preload" as="image" href="/images/blog/230623/patch_2305_not_possible_dts.jpg"/><link rel="preload" as="image" href="/images/blog/230623/patch_2305_not_possible_8531.jpg"/><link rel="stylesheet" href="/_next/static/css/5f4b86ec0fe97e1b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/f748654d5fd56294.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-165eea145570d96f.js"/><script src="/_next/static/chunks/3471c0f1-010786d28242dc9d.js" async=""></script><script src="/_next/static/chunks/6-82f781cfdf3075d7.js" async=""></script><script src="/_next/static/chunks/main-app-e2409ad9a754ecad.js" async=""></script><script src="/_next/static/chunks/951-68001eacaacb5ddd.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-693d42848e3d3b54.js" async=""></script><title>Patching OpenWrt with a new driver | Brian Phan</title><meta name="description" content="This is my portfolio."/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta property="og:title" content="My Portfolio"/><meta property="og:description" content="This is my portfolio."/><meta property="og:url" content="https://bachsofttrick.github.io"/><meta property="og:site_name" content="My Portfolio"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="My Portfolio"/><meta name="twitter:description" content="This is my portfolio."/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="antialiased max-w-4xl mx-4 mt-8 lg:mx-auto"><main class="flex-auto min-w-0 mt-6 flex flex-col px-2 md:px-0"><aside class="-ml-[8px] mb-16 tracking-tight"><div class="lg:sticky lg:top-20"><nav class="flex flex-row items-start relative px-0 pb-0 fade md:overflow-auto scroll-pr-6 md:relative" id="nav"><div class="flex flex-row space-x-0 pr-10"><a class="transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2 m-1" href="/">home</a><a class="transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2 m-1" href="/about">about</a><a class="transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2 m-1" href="/blog">blog</a></div></nav></div></aside><section><h1 class="title font-semibold text-2xl tracking-tighter">Patching OpenWrt with a new driver</h1><div class="flex justify-between items-center mt-2 mb-8 text-sm"><p class="text-sm text-neutral-600 dark:text-neutral-400">Jun 23, 2023</p></div><article class="prose"><p>I wrote a post on compiling OpenWrt from source a few months ago. Since
then, I&#x27;ve been playing around with its source, building new images with
it to test on virtual machines. OpenWrt finally added <a target="_blank" rel="noopener noreferrer" href="https://github.com/openwrt/openwrt/pull/12818">support for
Orange Pi R1 Plus (LTS)</a> for
their next release, 23.05. And with a new driver for RTL8153, a chipset
used in the board, I decided to go back to patching OpenWrt one more
time.</p>
<h4 id="kernel-patch"><a href="#kernel-patch" class="anchor"></a>Kernel patch</h4>
<p>As shown from my previous post on OpenWrt for Orange Pi R1 Plus, kernel
patches are how they affect the kernel to their preferences for running
OpenWrt, like allowing unsupported devices to run the OS. The Linux
kernel source has upstreamed dts for R1 Plus on v6.3 and LTS on v6.4,
and now is <em>backported</em> to kernel 5.15 for OpenWrt 23.05 using kernel
patches. Patches are created using either <em>diff</em> or <em>git diff</em>.</p>
<h4 id="how-to-create-diff"><a href="#how-to-create-diff" class="anchor"></a>How to create diff</h4>
<p>It&#x27;s actually quite easy. Just follow this command:</p>
<p><em>diff -rupN &lt;source&gt; &lt;target&gt; &gt; &lt;output&gt;</em></p>
<p>With:</p>
<p>- r to compare with subdirectories, subfolders</p>
<p>- u outputs NUM (default 3) lines of unified context (yeah I don&#x27;t get
it)</p>
<p>- p shows which C function each change is in</p>
<p>- N treats absent files as empty</p>
<p>Or:</p>
<p><em>git diff &lt;source&gt; &lt;target&gt; &gt; &lt;output&gt;</em></p>
<h4 id="patch-new-driver-into-the-kernel"><a href="#patch-new-driver-into-the-kernel" class="anchor"></a>Patch new driver into the kernel</h4>
<p>I first tried using <em>/dev/null</em> as source to diff against <em>r8152.c</em> file
from Realtek, and then put it in as patch. I deleted a patch related to
<em>r8152.c</em> so it remained original to kernel source. I put the patch in
<em>target/linux/generic/hack-5.15</em>, same as where I deleted the previous
patch. But replacing the kernel driver wasn&#x27;t easy, I tried</p>
<p><em>--- a/drivers/net/usb/r8152.c</em></p>
<p><em>+++ /dev/null</em></p>
<p><em>--- /dev/null</em></p>
<p><em>+++ b/drivers/net/usb/r8152.c</em></p>
<p>or</p>
<p><em>--- /dev/null</em></p>
<p><em>+++ b/drivers/net/usb/r8152.c</em></p>
<p>The source didn&#x27;t compile due to the file already existing in the
kernel.</p>
<p>So I did the hard way. I went into <em>dl</em> folder, extract <em>r8152.c</em> from
<em>linux-5.15.117.tar.xz</em> (at the time OpenWrt was built on kernel
5.15.117) then diff against the same file from Realtek. It compiled
successfully. I could run it well on a virtual machine.</p>
<p><p class="flex justify-center"><img src="/images/blog/230623/patch_2.jpg" alt=""/></p></p>
<p>Apparently, the compiler doesn&#x27;t read anything above the first change in
the patch. So the lines before that is considered comments to the
compiler. I added a note to say that this driver is not from the kernel
source.</p>
<h4 id="patch-new-driver-into-immortalwrt"><a href="#patch-new-driver-into-immortalwrt" class="anchor"></a>Patch new driver into ImmortalWrt</h4>
<p>I also used ImmortalWrt 21.02 for testing their software offloading
<em>TurboACC</em>. Originally, ImmortalWrt wouldn&#x27;t compile with the original
source because of lack of &#x27;libcap&#x27;. I found out that the library existed
in 22.03 of OpenWrt, not in 21.02 which was the base for ImmortalWrt. So
I copied it from OpenWrt at <em>package/libs/libcap</em> and took it to
ImmortalWrt. It compiled.</p>
<h4 id="test-rtl8153-using-openwrt"><a href="#test-rtl8153-using-openwrt" class="anchor"></a>Test RTL8153 using OpenWrt</h4>
<p>I tested it using my device and iperf3. The LAN port contains RTL8153
chipset and I tested it half-duplex, 1 download 1 upload separately.
Download from my laptop to the LAN port got me <strong>940 Mbps</strong>, which was
max bandwidth for <strong>1 Gbps</strong> Ethernet:</p>
<p><em>[ ID] Interval Transfer Bitrate Retr Cwnd</em></p>
<p><em>[ 5] 0.00-1.00 sec 113 MBytes 950 Mbits/sec 0 708 KBytes</em></p>
<p><em>[ 5] 1.00-2.00 sec 111 MBytes 933 Mbits/sec 0 758 KBytes</em></p>
<p><em>[ 5] 2.00-3.00 sec 112 MBytes 944 Mbits/sec 0 799 KBytes</em></p>
<p><em>[ 5] 3.00-4.00 sec 111 MBytes 933 Mbits/sec 0 841 KBytes</em></p>
<p><em>[ 5] 4.00-5.00 sec 111 MBytes 933 Mbits/sec 0 901 KBytes</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 559 MBytes 939 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 557 MBytes 934 Mbits/sec receiver</em></p>
<p>Upload on original driver reached only <strong>630 Mbps</strong>:</p>
<p><em>[ ID] Interval Transfer Bitrate</em></p>
<p><em>[ 5] 0.00-1.00 sec 70.1 MBytes 588 Mbits/sec</em></p>
<p><em>[ 5] 1.00-2.00 sec 74.6 MBytes 626 Mbits/sec</em></p>
<p><em>[ 5] 2.00-3.00 sec 75.2 MBytes 631 Mbits/sec</em></p>
<p><em>[ 5] 3.00-4.00 sec 75.4 MBytes 632 Mbits/sec</em></p>
<p><em>[ 5] 4.00-5.00 sec 74.7 MBytes 627 Mbits/sec</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 371 MBytes 622 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 370 MBytes 621 Mbits/sec receiver</em></p>
<p>Upload after patch reached <strong>880 Mbps</strong>:</p>
<p><em>[ ID] Interval Transfer Bitrate</em></p>
<p><em>[ 5] 0.00-1.00 sec 97.8 MBytes 821 Mbits/sec</em></p>
<p><em>[ 5] 1.00-2.00 sec 107 MBytes 894 Mbits/sec</em></p>
<p><em>[ 5] 2.00-3.00 sec 107 MBytes 896 Mbits/sec</em></p>
<p><em>[ 5] 3.00-4.00 sec 103 MBytes 861 Mbits/sec</em></p>
<p><em>[ 5] 4.00-5.00 sec 106 MBytes 885 Mbits/sec</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 522 MBytes 876 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 519 MBytes 871 Mbits/sec receiver</em></p>
<h4 id="test-rtl8153-using-immortalwrt"><a href="#test-rtl8153-using-immortalwrt" class="anchor"></a>Test RTL8153 using ImmortalWrt</h4>
<p>I also tested the RTL8153 chipset with ImmortalWrt 21.02 original
driver. It got me <strong>940 Mbps</strong> download:</p>
<p><em>[ ID] Interval Transfer Bitrate Retr Cwnd</em></p>
<p><em>[ 5] 0.00-1.00 sec 113 MBytes 948 Mbits/sec 0 396 KBytes</em></p>
<p><em>[ 5] 1.00-2.00 sec 112 MBytes 941 Mbits/sec 0 396 KBytes</em></p>
<p><em>[ 5] 2.00-3.00 sec 111 MBytes 932 Mbits/sec 0 563 KBytes</em></p>
<p><em>[ 5] 3.00-4.00 sec 112 MBytes 940 Mbits/sec 0 563 KBytes</em></p>
<p><em>[ 5] 4.00-5.00 sec 112 MBytes 938 Mbits/sec 0 563 KBytes</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 560 MBytes 940 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 558 MBytes 935 Mbits/sec receiver</em></p>
<p>and <strong>720 Mbps</strong> upload:</p>
<p><em>[ ID] Interval Transfer Bitrate</em></p>
<p><em>[ 5] 0.00-1.00 sec 84.5 MBytes 709 Mbits/sec</em></p>
<p><em>[ 5] 1.00-2.00 sec 87.5 MBytes 734 Mbits/sec</em></p>
<p><em>[ 5] 2.00-3.00 sec 86.5 MBytes 726 Mbits/sec</em></p>
<p><em>[ 5] 3.00-4.00 sec 85.5 MBytes 717 Mbits/sec</em></p>
<p><em>[ 5] 4.00-5.00 sec 86.9 MBytes 729 Mbits/sec</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 433 MBytes 726 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 431 MBytes 723 Mbits/sec receiver</em></p>
<p>I tested RTL8153 again after patch with iperf3 upload. It got <strong>870
Mbps</strong>:</p>
<p><em>[ ID] Interval Transfer Bitrate</em></p>
<p><em>[ 5] 0.00-1.00 sec 103 MBytes 862 Mbits/sec</em></p>
<p><em>[ 5] 1.00-2.00 sec 103 MBytes 867 Mbits/sec</em></p>
<p><em>[ 5] 2.00-3.00 sec 103 MBytes 862 Mbits/sec</em></p>
<p><em>[ 5] 3.00-4.00 sec 104 MBytes 870 Mbits/sec</em></p>
<p><em>[ 5] 4.00-5.00 sec 105 MBytes 879 Mbits/sec</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 521 MBytes 874 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 517 MBytes 868 Mbits/sec receiver</em></p>
<h4 id="test-yt8531c-using-openwrt-and-immortalwrt"><a href="#test-yt8531c-using-openwrt-and-immortalwrt" class="anchor"></a>Test YT8531c using OpenWrt and ImmortalWrt</h4>
<p>I couldn&#x27;t test the WAN port with YT8531c chipset. I couldn&#x27;t get IP
address on my laptop, despite setting the WAN port to have the same
settings as the LAN port for DHCP. I did try in vain to patch it using
dts patch of the R1 Plus LTS board. As you can see, they had updated
Mootorcomm driver and the device tree source with new values like
clk-out-frequency-hz, keep-pll-enabled, auto-sleep-disabled. Maybe there
is something wrong with the driver, because this also happened on
ImmortalWrt 23.05. Using
<a target="_blank" rel="noopener noreferrer" href="https://github.com/armbian/community">Armbian</a>, however,
I could use the WAN port normally.</p>
<p><p class="flex justify-center"><img src="/images/blog/230623/patch_2305_not_possible_dts.jpg" alt=""/></p></p>
<p><p class="flex justify-center"><img src="/images/blog/230623/patch_2305_not_possible_8531.jpg" alt=""/></p></p>
<p>So in the end, OpenWrt 23.05 <strong>shouldn&#x27;t be used</strong> just yet.</p>
<p>I rolled back to OpenWrt 22.03. I tested the WAN port with iperf3 again.</p>
<p>Download <strong>940 Mbps</strong>:</p>
<p><em>[ ID] Interval Transfer Bitrate Retr Cwnd</em></p>
<p><em>[ 5] 0.00-1.00 sec 113 MBytes 948 Mbits/sec 0 551 KBytes</em></p>
<p><em>[ 5] 1.00-2.00 sec 113 MBytes 945 Mbits/sec 0 551 KBytes</em></p>
<p><em>[ 5] 2.00-3.00 sec 111 MBytes 932 Mbits/sec 0 551 KBytes</em></p>
<p><em>[ 5] 3.00-4.00 sec 112 MBytes 943 Mbits/sec 0 551 KBytes</em></p>
<p><em>[ 5] 4.00-5.00 sec 112 MBytes 937 Mbits/sec 0 551 KBytes</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 561 MBytes 941 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.01 sec 559 MBytes 935 Mbits/sec receiver</em></p>
<p>Upload <strong>930 Mbps</strong>:</p>
<p><em>[ ID] Interval Transfer Bitrate</em></p>
<p><em>[ 5] 0.00-1.00 sec 105 MBytes 881 Mbits/sec</em></p>
<p><em>[ 5] 1.00-2.00 sec 111 MBytes 931 Mbits/sec</em></p>
<p><em>[ 5] 2.00-3.00 sec 111 MBytes 931 Mbits/sec</em></p>
<p><em>[ 5] 3.00-4.00 sec 111 MBytes 934 Mbits/sec</em></p>
<p><em>[ 5] 4.00-5.00 sec 112 MBytes 937 Mbits/sec</em></p>
<p><em>- - - - - - - - - - - - - - - - - - - - - - - - -</em></p>
<p><em>[ ID] Interval Transfer Bitrate Retr</em></p>
<p><em>[ 5] 0.00-5.00 sec 552 MBytes 925 Mbits/sec 0 sender</em></p>
<p><em>[ 5] 0.00-5.00 sec 550 MBytes 923 Mbits/sec receiver</em></p>
<p>ImmortalWrt 21.02 gave out similar results.</p>
<h4 id="note-about-offloading"><a href="#note-about-offloading" class="anchor"></a>Note about offloading</h4>
<p>These tests have been performed <em>with and without [software
offloading]</em>. Doesn&#x27;t seem like it does anything. Whether
OpenWrt or <em>TurboACC</em> from ImmortalWrt. Packet steering also doesn&#x27;t
work, either.</p>
<h4 id="reason-for-better-performance-on-immortalwrt-compared-to-openwrt"><a href="#reason-for-better-performance-on-immortalwrt-compared-to-openwrt" class="anchor"></a>Reason for better performance on ImmortalWrt compared to OpenWrt</h4>
<p>As you can see when using RTL8153 original driver, OpenWrt only reached
<strong>630 Mbps</strong> while ImmortalWrt got <strong>720 Mbps</strong> in iperf3 upload is
because, ImmortalWrt overclocked the processor, Rockchip RK3328, from
stock 1.3 Ghz to <strong>1.6 Ghz</strong>. ImmortalWrt has a patch where they add
clock frequencies to the <a target="_blank" rel="noopener noreferrer" href="https://www.kernel.org/doc/Documentation/power/opp.txt">operating performance point (OPP)
table</a>.
ImmortalWrt was running RK3328 at 1.6 Ghz max.</p>
<p><em>--- a/arch/arm64/boot/dts/rockchip/rk3328.dtsi</em></p>
<p><em>+++ b/arch/arm64/boot/dts/rockchip/rk3328.dtsi</em></p>
<p><em>@@ -140,6 +140,21 @@</em></p>
<p><em>opp-microvolt = &lt;1300000&gt;;</em></p>
<p><em>clock-latency-ns = &lt;40000&gt;;</em></p>
<p><em>};</em></p>
<p><em>+ opp-1392000000 {</em></p>
<p><em>+ opp-hz = /bits/ 64 &lt;1392000000&gt;;</em></p>
<p><em>+ opp-microvolt = &lt;1350000&gt;;</em></p>
<p><em>+ clock-latency-ns = &lt;40000&gt;;</em></p>
<p><em>+ };</em></p>
<p><em>+ opp-1512000000 {</em></p>
<p><em>+ opp-hz = /bits/ 64 &lt;1512000000&gt;;</em></p>
<p><em>+ opp-microvolt = &lt;1450000&gt;;</em></p>
<p><em>+ clock-latency-ns = &lt;40000&gt;;</em></p>
<p><em>+ };</em></p>
<p><em>+ opp-1608000000 {</em></p>
<p><em>+ opp-hz = /bits/ 64 &lt;1608000000&gt;;</em></p>
<p><em>+ opp-microvolt = &lt;1450000&gt;;</em></p>
<p><em>+ clock-latency-ns = &lt;40000&gt;;</em></p>
<p><em>+ };</em></p>
<p><em>};</em></p>
<p><em>amba {</em></p>
<p>References:</p>
<p>- <a target="_blank" rel="noopener noreferrer" href="https://www.kernel.org/doc/html/v4.18/process/applying-patches.html">Kernel Patch</a></p>
<p>- <a target="_blank" rel="noopener noreferrer" href="https://www.realtek.com/en/component/zoo/category/network-interface-controllers-10-100-1000m-gigabit-ethernet-usb-3-0-software">RTL8153 linux driver</a></p>
<p>- <a target="_blank" rel="noopener noreferrer" href="https://github.com/bachsofttrick/openwrt/commits/openwrt-23.05">OpenWrt 23.05 RTL8153 patch</a></p></article></section><footer class="mb-16"><ul class="font-sm mt-8 flex flex-col space-x-0 space-y-2 text-neutral-600 md:flex-row md:space-x-4 md:space-y-0 dark:text-neutral-300"><li><p class=" h-7 flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100">Corvallis, Oregon, USA</p></li><li><p class=" h-7 flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100">Phone: 541-360-9231</p></li></ul><ul class="font-sm flex flex-col space-x-0 space-y-2 text-neutral-600 md:flex-row md:space-x-4 md:space-y-0 dark:text-neutral-300"><li><a class="flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100" rel="noopener noreferrer" target="_blank" href="https://github.com/bachsofttrick"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z" fill="currentColor"></path></svg><p class="ml-2 h-7">github</p></a></li><li><a class="flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100" rel="noopener noreferrer" target="_blank" href="https://github.com/bachsofttrick/bachsofttrick.github.io"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z" fill="currentColor"></path></svg><p class="ml-2 h-7">view source</p></a></li><li><a class="flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100" rel="noopener noreferrer" target="_blank" href="https://linkedin.com/in/brian-phan-58530b1b0/"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z" fill="currentColor"></path></svg><p class="ml-2 h-7">linkedin</p></a></li><li><a class="flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100" rel="noopener noreferrer" target="_blank" href="mailto:xuanbach1307@gmail.com"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z" fill="currentColor"></path></svg><p class="ml-2 h-7">email</p></a></li></ul><p class="mt-8 text-neutral-600 dark:text-neutral-300">2025</p></footer></main><script src="/_next/static/chunks/webpack-165eea145570d96f.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/ec1a1eae803b668e-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/f980ec13b5b5e554.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/5f4b86ec0fe97e1b.css\",\"style\"]\n4:HL[\"/_next/static/css/f748654d5fd56294.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"5:I[4163,[],\"\"]\n8:I[5505,[],\"\"]\na:I[8694,[],\"\"]\nb:I[7951,[\"951\",\"static/chunks/951-68001eacaacb5ddd.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-693d42848e3d3b54.js\"],\"\"]\nd:I[8233,[],\"\"]\n9:[\"slug\",\"230623\",\"d\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L5\",null,{\"buildId\":\"EynKTnUS2FdrM6R0oJfsQ\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"blog\",\"230623\"],\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"230623\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"230623\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"230623\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L6\",[\"$\",\"section\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"title font-semibold text-2xl tracking-tighter\",\"children\":\"Patching OpenWrt with a new driver\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-between items-center mt-2 mb-8 text-sm\",\"children\":[\"$\",\"p\",null,{\"className\":\"text-sm text-neutral-600 dark:text-neutral-400\",\"children\":\"Jun 23, 2023\"}]}],[\"$\",\"article\",null,{\"className\":\"prose\",\"children\":\"$L7\"}]]}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f748654d5fd56294.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]],null],null]},[null,[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5f4b86ec0fe97e1b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"text-black bg-white dark:text-white dark:bg-black __variable_ac79ff __variable_8a4d12\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased max-w-4xl mx-4 mt-8 lg:mx-auto\",\"children\":[\"$\",\"main\",null,{\"className\":\"flex-auto min-w-0 mt-6 flex flex-col px-2 md:px-0\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"-ml-[8px] mb-16 tracking-tight\",\"children\":[\"$\",\"div\",null,{\"className\":\"lg:sticky lg:top-20\",\"children\":[\"$\",\"nav\",null,{\"className\":\"flex flex-row items-start relative px-0 pb-0 fade md:overflow-auto scroll-pr-6 md:relative\",\"id\":\"nav\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-row space-x-0 pr-10\",\"children\":[[\"$\",\"$Lb\",\"/\",{\"href\":\"/\",\"className\":\"transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2 m-1\",\"children\":\"home\"}],[\"$\",\"$Lb\",\"/about\",{\"href\":\"/about\",\"className\":\"transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2 m-1\",\"children\":\"about\"}],[\"$\",\"$Lb\",\"/blog\",{\"href\":\"/blog\",\"className\":\"transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2 m-1\",\"children\":\"blog\"}]]}]}]}]}],[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"section\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-8 text-2xl font-semibold tracking-tighter\",\"children\":\"404 - Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"mb-4\",\"children\":\"The page you are looking for does not exist.\"}]]}],\"notFoundStyles\":[]}],[\"$\",\"footer\",null,{\"className\":\"mb-16\",\"children\":[[\"$\",\"ul\",null,{\"className\":\"font-sm mt-8 flex flex-col space-x-0 space-y-2 text-neutral-600 md:flex-row md:space-x-4 md:space-y-0 dark:text-neutral-300\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$undefined\",[\"$\",\"p\",null,{\"className\":\" h-7 flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100\",\"children\":\"Corvallis, Oregon, USA\"}]]}],[\"$\",\"li\",null,{\"children\":[\"$undefined\",[\"$\",\"p\",null,{\"className\":\" h-7 flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100\",\"children\":\"Phone: 541-360-9231\"}]]}]]}],[\"$\",\"ul\",null,{\"className\":\"font-sm flex flex-col space-x-0 space-y-2 text-neutral-600 md:flex-row md:space-x-4 md:space-y-0 dark:text-neutral-300\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"className\":\"flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"https://github.com/bachsofttrick\",\"children\":[[\"$\",\"svg\",null,{\"width\":\"12\",\"height\":\"12\",\"viewBox\":\"0 0 12 12\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[\"$\",\"path\",null,{\"d\":\"M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z\",\"fill\":\"currentColor\"}]}],[\"$\",\"p\",null,{\"className\":\"ml-2 h-7\",\"children\":\"github\"}]]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"className\":\"flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"https://github.com/bachsofttrick/bachsofttrick.github.io\",\"children\":[[\"$\",\"svg\",null,{\"width\":\"12\",\"height\":\"12\",\"viewBox\":\"0 0 12 12\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[\"$\",\"path\",null,{\"d\":\"M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z\",\"fill\":\"currentColor\"}]}],[\"$\",\"p\",null,{\"className\":\"ml-2 h-7\",\"children\":\"view source\"}]]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"className\":\"flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"https://linkedin.com/in/brian-phan-58530b1b0/\",\"children\":[[\"$\",\"svg\",null,{\"width\":\"12\",\"height\":\"12\",\"viewBox\":\"0 0 12 12\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[\"$\",\"path\",null,{\"d\":\"M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z\",\"fill\":\"currentColor\"}]}],[\"$\",\"p\",null,{\"className\":\"ml-2 h-7\",\"children\":\"linkedin\"}]]}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"className\":\"flex items-center transition-all hover:text-neutral-800 dark:hover:text-neutral-100\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"mailto:xuanbach1307@gmail.com\",\"children\":[[\"$\",\"svg\",null,{\"width\":\"12\",\"height\":\"12\",\"viewBox\":\"0 0 12 12\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[\"$\",\"path\",null,{\"d\":\"M2.07102 11.3494L0.963068 10.2415L9.2017 1.98864H2.83807L2.85227 0.454545H11.8438V9.46023H10.2955L10.3097 3.09659L2.07102 11.3494Z\",\"fill\":\"currentColor\"}]}],[\"$\",\"p\",null,{\"className\":\"ml-2 h-7\",\"children\":\"email\"}]]}]}]]}],[\"$\",\"p\",null,{\"className\":\"mt-8 text-neutral-600 dark:text-neutral-300\",\"children\":2025}]]}]]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"p\",null,{\"children\":[\"I wrote a post on compiling OpenWrt from source a few months ago. Since\\nthen, I've been playing around with its source, building new images with\\nit to test on virtual machines. OpenWrt finally added \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/openwrt/openwrt/pull/12818\",\"children\":\"support for\\nOrange Pi R1 Plus (LTS)\"}],\" for\\ntheir next release, 23.05. And with a new driver for RTL8153, a chipset\\nused in the board, I decided to go back to patching OpenWrt one more\\ntime.\"]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"kernel-patch\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-kernel-patch\",{\"href\":\"#kernel-patch\",\"className\":\"anchor\"}]],\"Kernel patch\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As shown from my previous post on OpenWrt for Orange Pi R1 Plus, kernel\\npatches are how they affect the kernel to their preferences for running\\nOpenWrt, like allowing unsupported devices to run the OS. The Linux\\nkernel source has upstreamed dts for R1 Plus on v6.3 and LTS on v6.4,\\nand now is \",[\"$\",\"em\",null,{\"children\":\"backported\"}],\" to kernel 5.15 for OpenWrt 23.05 using kernel\\npatches. Patches are created using either \",[\"$\",\"em\",null,{\"children\":\"diff\"}],\" or \",[\"$\",\"em\",null,{\"children\":\"git diff\"}],\".\"]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"how-to-create-diff\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-how-to-create-diff\",{\"href\":\"#how-to-create-diff\",\"className\":\"anchor\"}]],\"How to create diff\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"It's actually quite easy. Just follow this command:\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"diff -rupN \u003csource\u003e \u003ctarget\u003e \u003e \u003coutput\u003e\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"With:\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"- r to compare with subdirectories, subfolders\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"- u outputs NUM (default 3) lines of unified context (yeah I don't get\\nit)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"- p shows which C function each change is in\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"- N treats absent files as empty\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Or:\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"git diff \u003csource\u003e \u003ctarget\u003e \u003e \u003coutput\u003e\"}]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"patch-new-driver-into-the-kernel\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-patch-new-driver-into-the-kernel\",{\"href\":\"#patch-new-driver-into-the-kernel\",\"className\":\"anchor\"}]],\"Patch new driver into the kernel\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I first tried using \",[\"$\",\"em\",null,{\"children\":\"/dev/null\"}],\" as source to diff against \",[\"$\",\"em\",null,{\"children\":\"r8152.c\"}],\" file\\nfrom Realtek, and then put it in as patch. I deleted a patch related to\\n\",[\"$\",\"em\",null,{\"children\":\"r8152.c\"}],\" so it remained original to kernel source. I put the patch in\\n\",[\"$\",\"em\",null,{\"children\":\"target/linux/generic/hack-5.15\"}],\", same as where I deleted the previous\\npatch. But replacing the kernel driver wasn't easy, I tried\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"--- a/drivers/net/usb/r8152.c\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+++ /dev/null\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"--- /dev/null\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+++ b/drivers/net/usb/r8152.c\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"or\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"--- /dev/null\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+++ b/drivers/net/usb/r8152.c\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The source didn't compile due to the file already existing in the\\nkernel.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"So I did the hard way. I went into \",[\"$\",\"em\",null,{\"children\":\"dl\"}],\" folder, extract \",[\"$\",\"em\",null,{\"children\":\"r8152.c\"}],\" from\\n\",[\"$\",\"em\",null,{\"children\":\"linux-5.15.117.tar.xz\"}],\" (at the time OpenWrt was built on kernel\\n5.15.117) then diff against the same file from Realtek. It compiled\\nsuccessfully. I could run it well on a virtual machine.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"p\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/230623/patch_2.jpg\",\"alt\":\"\"}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Apparently, the compiler doesn't read anything above the first change in\\nthe patch. So the lines before that is considered comments to the\\ncompiler. I added a note to say that this driver is not from the kernel\\nsource.\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"patch-new-driver-into-immortalwrt\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-patch-new-driver-into-immortalwrt\",{\"href\":\"#patch-new-driver-into-immortalwrt\",\"className\":\"anchor\"}]],\"Patch new driver into ImmortalWrt\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I also used ImmortalWrt 21.02 for testing their software offloading\\n\",[\"$\",\"em\",null,{\"children\":\"TurboACC\"}],\". Originally, ImmortalWrt wouldn't compile with the original\\nsource because of lack of 'libcap'. I found out that the library existed\\nin 22.03 of OpenWrt, not in 21.02 which was the base for ImmortalWrt. So\\nI copied it from OpenWrt at \",[\"$\",\"em\",null,{\"children\":\"package/libs/libcap\"}],\" and took it to\\nImmortalWrt. It compiled.\"]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"test-rtl8153-using-openwrt\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-test-rtl8153-using-openwrt\",{\"href\":\"#test-rtl8153-using-openwrt\",\"className\":\"anchor\"}]],\"Test RTL8153 using OpenWrt\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I tested it using my device and iperf3. The LAN port contains RTL8153\\nchipset and I tested it half-duplex, 1 download 1 upload separately.\\nDownload from my laptop to the LAN port got me \",[\"$\",\"strong\",null,{\"children\":\"940 Mbps\"}],\", which was\\nmax bandwidth for \",[\"$\",\"strong\",null,{\"children\":\"1 Gbps\"}],\" Ethernet:\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr Cwnd\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 113 MBytes 950 Mbits/sec 0 708 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 111 MBytes 933 Mbits/sec 0 758 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 112 MBytes 944 Mbits/sec 0 799 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 111 MBytes 933 Mbits/sec 0 841 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 111 MBytes 933 Mbits/sec 0 901 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 559 MBytes 939 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 557 MBytes 934 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Upload on original driver reached only \",[\"$\",\"strong\",null,{\"children\":\"630 Mbps\"}],\":\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 70.1 MBytes 588 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 74.6 MBytes 626 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 75.2 MBytes 631 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 75.4 MBytes 632 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 74.7 MBytes 627 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 371 MBytes 622 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 370 MBytes 621 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Upload after patch reached \",[\"$\",\"strong\",null,{\"children\":\"880 Mbps\"}],\":\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 97.8 MBytes 821 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 107 MBytes 894 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 107 MBytes 896 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 103 MBytes 861 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 106 MBytes 885 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 522 MBytes 876 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 519 MBytes 871 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"test-rtl8153-using-immortalwrt\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-test-rtl8153-using-immortalwrt\",{\"href\":\"#test-rtl8153-using-immortalwrt\",\"className\":\"anchor\"}]],\"Test RTL8153 using ImmortalWrt\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I also tested the RTL8153 chipset with ImmortalWrt 21.02 original\\ndriver. It got me \",[\"$\",\"strong\",null,{\"children\":\"940 Mbps\"}],\" download:\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr Cwnd\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 113 MBytes 948 Mbits/sec 0 396 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 112 MBytes 941 Mbits/sec 0 396 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 111 MBytes 932 Mbits/sec 0 563 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 112 MBytes 940 Mbits/sec 0 563 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 112 MBytes 938 Mbits/sec 0 563 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 560 MBytes 940 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 558 MBytes 935 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"and \",[\"$\",\"strong\",null,{\"children\":\"720 Mbps\"}],\" upload:\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 84.5 MBytes 709 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 87.5 MBytes 734 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 86.5 MBytes 726 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 85.5 MBytes 717 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 86.9 MBytes 729 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 433 MBytes 726 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 431 MBytes 723 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I tested RTL8153 again after patch with iperf3 upload. It got \",[\"$\",\"strong\",null,{\"children\":\"870\\nMbps\"}],\":\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 103 MBytes 862 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 103 MBytes 867 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 103 MBytes 862 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 104 MBytes 870 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 105 MBytes 879 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 521 MBytes 874 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 517 MBytes 868 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"test-yt8531c-using-openwrt-and-immortalwrt\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-test-yt8531c-using-openwrt-and-immortalwrt\",{\"href\":\"#test-yt8531c-using-openwrt-and-immortalwrt\",\"className\":\"anchor\"}]],\"Test YT8531c using OpenWrt and ImmortalWrt\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I couldn't test the WAN port with YT8531c chipset. I couldn't get IP\\naddress on my laptop, despite setting the WAN port to have the same\\nsettings as the LAN port for DHCP. I did try in vain to patch it using\\ndts patch of the R1 Plus LTS board. As you can see, they had updated\\nMootorcomm driver and the device tree source with new values like\\nclk-out-frequency-hz, keep-pll-enabled, auto-sleep-disabled. Maybe there\\nis something wrong with the driver, because this also happened on\\nImmortalWrt 23.05. Using\\n\",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/armbian/community\",\"children\":\"Armbian\"}],\", however,\\nI could use the WAN port normally.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"p\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/230623/patch_2305_not_possible_dts.jpg\",\"alt\":\"\"}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"p\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/230623/patch_2305_not_possible_8531.jpg\",\"alt\":\"\"}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"So in the end, OpenWrt 23.05 \",[\"$\",\"strong\",null,{\"children\":\"shouldn't be used\"}],\" just yet.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I rolled back to OpenWrt 22.03. I tested the WAN port with iperf3 again.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Download \",[\"$\",\"strong\",null,{\"children\":\"940 Mbps\"}],\":\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr Cwnd\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 113 MBytes 948 Mbits/sec 0 551 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 113 MBytes 945 Mbits/sec 0 551 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 111 MBytes 932 Mbits/sec 0 551 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 112 MBytes 943 Mbits/sec 0 551 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 112 MBytes 937 Mbits/sec 0 551 KBytes\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 561 MBytes 941 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.01 sec 559 MBytes 935 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Upload \",[\"$\",\"strong\",null,{\"children\":\"930 Mbps\"}],\":\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-1.00 sec 105 MBytes 881 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 1.00-2.00 sec 111 MBytes 931 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 2.00-3.00 sec 111 MBytes 931 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 3.00-4.00 sec 111 MBytes 934 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 4.00-5.00 sec 112 MBytes 937 Mbits/sec\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"- - - - - - - - - - - - - - - - - - - - - - - - -\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ ID] Interval Transfer Bitrate Retr\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 552 MBytes 925 Mbits/sec 0 sender\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"[ 5] 0.00-5.00 sec 550 MBytes 923 Mbits/sec receiver\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"ImmortalWrt 21.02 gave out similar results.\"}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"note-about-offloading\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-note-about-offloading\",{\"href\":\"#note-about-offloading\",\"className\":\"anchor\"}]],\"Note about offloading\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"These tests have been performed \",[\"$\",\"em\",null,{\"children\":\"with and without [software\\noffloading]\"}],\". Doesn't seem like it does anything. Whether\\nOpenWrt or \",[\"$\",\"em\",null,{\"children\":\"TurboACC\"}],\" from ImmortalWrt. Packet steering also doesn't\\nwork, either.\"]}],\"\\n\",[\"$\",\"h4\",null,{\"id\":\"reason-for-better-performance-on-immortalwrt-compared-to-openwrt\",\"className\":\"$undefined\",\"children\":[[[\"$\",\"a\",\"link-reason-for-better-performance-on-immortalwrt-compared-to-openwrt\",{\"href\":\"#reason-for-better-performance-on-immortalwrt-compared-to-openwrt\",\"className\":\"anchor\"}]],\"Reason for better performance on ImmortalWrt compared to OpenWrt\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As you can see when using RTL8153 original driver, OpenWrt only reached\\n\",[\"$\",\"strong\",null,{\"children\":\"630 Mbps\"}],\" while ImmortalWrt got \",[\"$\",\"strong\",null,{\"children\":\"720 Mbps\"}],\" in iperf3 upload is\\nbecause, ImmortalWrt overclocked the processor, Rockchip RK3328, from\\nstock 1.3 Ghz to \",[\"$\",\"strong\",null,{\"children\":\"1.6 Ghz\"}],\". ImmortalWrt has a patch where they add\\nclock frequencies to the \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.kernel.org/doc/Documentation/power/opp.txt\",\"children\":\"operating performance point (OPP)\\ntable\"}],\".\\nImmortalWrt was running RK3328 at 1.6 Ghz max.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"--- a/arch/arm64/boot/dts/rockchip/rk3328.dtsi\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+++ b/arch/arm64/boot/dts/rockchip/rk3328.dtsi\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"@@ -140,6 +140,21 @@\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"opp-microvolt = \u003c1300000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"clock-latency-ns = \u003c40000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"};\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-1392000000 {\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-hz = /bits/ 64 \u003c1392000000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-microvolt = \u003c1350000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ clock-latency-ns = \u003c40000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ };\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-1512000000 {\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-hz = /bits/ 64 \u003c1512000000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-microvolt = \u003c1450000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ clock-latency-ns = \u003c40000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ };\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-1608000000 {\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-hz = /bits/ 64 \u003c1608000000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ opp-microvolt = \u003c1450000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ clock-latency-ns = \u003c40000\u003e;\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"+ };\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"};\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"amba {\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"References:\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"- \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.kernel.org/doc/html/v4.18/process/applying-patches.html\",\"children\":\"Kernel Patch\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"- \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.realtek.com/en/component/zoo/category/network-interface-controllers-10-100-1000m-gigabit-ethernet-usb-3-0-software\",\"children\":\"RTL8153 linux driver\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"- \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/bachsofttrick/openwrt/commits/openwrt-23.05\",\"children\":\"OpenWrt 23.05 RTL8153 patch\"}]]}]]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Patching OpenWrt with a new driver | Brian Phan\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"This is my portfolio.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"My Portfolio\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"This is my portfolio.\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://bachsofttrick.github.io\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"My Portfolio\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"My Portfolio\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"This is my portfolio.\"}],[\"$\",\"meta\",\"15\",{\"name\":\"next-size-adjust\"}]]\n6:null\n"])</script></body></html>